<?xml version="1.0" encoding="utf-8"?>

<config>
    <global>
        <defaultSnapshot>ICABase</defaultSnapshot>
        <logfileRootDir>TestResults</logfileRootDir>
    </global>

    <testSuites>
    <suite>
        <suiteName>Tests</suiteName>
        <suiteTests>
            <suiteTest>VMHeartbeat</suiteTest>
            <suiteTest>VerifyLisModules</suiteTest>
            <suiteTest>Verify_LISModules_Version</suiteTest>
            <suiteTest>LISShutdownVM</suiteTest>
            <suiteTest>VerifyItegratedShutdownService</suiteTest>
            <suiteTest>RebootDifferentMemSettings</suiteTest>
            <suiteTest>TimeSync</suiteTest>
            <suiteTest>TimeSync_SavedVM</suiteTest>
            <suiteTest>TimeSync_NTP</suiteTest>
            <suiteTest>Multi_Cpu_Test</suiteTest>
            <suiteTest>StressReloadModules</suiteTest>
            <suiteTest>CDmount</suiteTest>
            <suiteTest>VCPU_verify_online</suiteTest>
            <suiteTest>CheckNuma</suiteTest>
            <suiteTest>CheckNuma_Maximum</suiteTest>
            <suiteTest>initrd_modules_check</suiteTest>
            <suiteTest>check_clocksource</suiteTest>
            <suiteTest>Disable_NUMA_By_Kernel</suiteTest>

            <suiteTest>SQM_Basic</suiteTest>
            <suiteTest>KVP_Basic</suiteTest>
            <suiteTest>KVP_Add_Key_Values</suiteTest>
            <suiteTest>KVP_Modify_Key_Values</suiteTest>
            <suiteTest>KVP_Remove_Key_Values</suiteTest>
            <suiteTest>KVP_Push_Key_Values</suiteTest>
            <suiteTest>KVP_DeleteNonExistKVPOnGuest</suiteTest>
            <suiteTest>KVP_ModifyNonExistKVPOnGuest</suiteTest>
            <suiteTest>KVP_VerifyHostInjectedItems</suiteTest>

            <suiteTest>STOR_VSS_BackupRestore</suiteTest>
            <suiteTest>STOR_VSS_BackupRestore_ext3_vhdx</suiteTest>
            <suiteTest>STOR_VSS_BackupRestore_reiserfs_vhdx</suiteTest>
            <suiteTest>STOR_VSS_BackupRestore_ext4_vhdx</suiteTest>
            <suiteTest>STOR_VSS_BackupRestore_ISO_NoNetwork</suiteTest>
            <suiteTest>STOR_VSS_BackupRestore_State_Off</suiteTest>
            <suiteTest>STOR_VSS_BackupRestore_State_Paused</suiteTest>
            <suiteTest>STOR_VSS_BackupRestore_Fail</suiteTest>
            <suiteTest>STOR_VSS_BackupRestore_PassTru</suiteTest>
            <suiteTest>STOR_VSS_BackupRestore_ISCSI</suiteTest>
            <suiteTest>STOR_VSS_BackupRestore_DiskStress</suiteTest>

            <suiteTest>VHDxResizeToBigger512</suiteTest>
            <suiteTest>VHDxResizeToBigger4096</suiteTest>
            <suiteTest>VHDxResizeToSmaller512</suiteTest>
            <suiteTest>VHDxResizeToSmaller4096</suiteTest>
            <suiteTest>VHDxResizeGrowShrink</suiteTest>
            <suiteTest>VHDxResizeGrowFilesystem512</suiteTest>
            <suiteTest>VHDxResizeGrowFilesystem4096</suiteTest>
            <suiteTest>VHDxResizeOver2TB</suiteTest>
            <!-- Requires clustered VM
            <suiteTest>VHDxResizeLiveMigration</suiteTest>-->

            <suiteTest>VHDx_MultiDiskSCSI_Dynamic</suiteTest>
            <suiteTest>VHDx_MultiDiskSCSI_Fixed</suiteTest>
            <suiteTest>VHDx_AddDiff_Disk_SCSI</suiteTest>
            <suiteTest>VHDx_HotADD_Multi_Dynamic_SCSI</suiteTest>
            <suiteTest>VHDx_HotRemove_Multi_Dynamic_SCSI</suiteTest>
            <suiteTest>VHDx_HotADD_Dynamic_SCSI_SMP</suiteTest>
            <suiteTest>VHDx_HotRemove_Dynamic_SCSI_SMP</suiteTest>
            <suiteTest>VHDx_4k_MultiDiskSCSI_Dynamic</suiteTest>
            <suiteTest>VHDx_4k_MultiDiskSCSI_Fixed</suiteTest>
            <suiteTest>VHDx_4k_HotADD_Multi_Dynamic_SCSI</suiteTest>
            <suiteTest>VHDx_4k_HotRemove_Multi_Dynamic_SCSI</suiteTest>
            <suiteTest>VHDx_SCSI_0_1_Dynamic_Large_3TB</suiteTest>
            <suiteTest>VHDx_SCSI_0_1_Dynamic_Large_16TB</suiteTest>
            <!-- The test case below requires a 64bit virtual machine -->
            <suiteTest>VHDx_SCSI_0_1_Dynamic_Large_64TB</suiteTest>

            <suiteTest>NMI_Send_Interrupt</suiteTest>
            <suiteTest>NMI_Verify_Interrupt</suiteTest>
            <suiteTest>NMI_different_vmStates</suiteTest>

            <suiteTest>VMBus_protocol_version</suiteTest>
            <suiteTest>VMBus_verify_interrupts</suiteTest>
            <suiteTest>VMBus_PanicNotifier</suiteTest>
            <suiteTest>VMBus_PanicNotifier_onKdump</suiteTest>

            <!-- The following tests require a Generation 2 VM -->
            <suiteTest>HotAddMultiNIC</suiteTest>
            <suiteTest>BootNoNicHotAddNic</suiteTest>
            <suiteTest>HotAddRemoveNic</suiteTest>

            <suiteTest>External</suiteTest>
            <suiteTest>InternalNetwork</suiteTest>
            <suiteTest>GuestOnlyNetwork</suiteTest>
            <suiteTest>OperState</suiteTest>
            <suiteTest>MultipleNIC</suiteTest>
            <suiteTest>StaticMAC</suiteTest>
            <suiteTest>ChangeNetTypeInternal</suiteTest>
            <suiteTest>ChangeNetTypeGuest</suiteTest>
            <suiteTest>CopyLargeFile</suiteTest>
            <suiteTest>VlanTagging</suiteTest>
            <suiteTest>VlanTrunking</suiteTest>
            <suiteTest>JumboFrame</suiteTest>
            <suiteTest>NetworkMode</suiteTest>
            <suiteTest>CopyFileDifferentMTU</suiteTest>
            <suiteTest>Network_Hang_Vxlan</suiteTest>
            <suiteTest>CopyFileScp</suiteTest>

            <suiteTest>IPInjection</suiteTest>

            <suiteTest>SecureBootBasic</suiteTest>
            <suiteTest>SecureBootMigrateVM</suiteTest>
            <suiteTest>SecureBootBasicVSSBackup</suiteTest>
            <suiteTest>SecureBootUpdateKernel</suiteTest>

            <suiteTest>DM_loaded</suiteTest>
            <suiteTest>HotAdd_Verify_udev</suiteTest>
           <!-- Dynamic Memory – Hot Add -->
            <suiteTest>HotAdd</suiteTest>
            <suiteTest>HotRemove</suiteTest>
            <suiteTest>StartupHighCompete</suiteTest>
            <suiteTest>DemandPressure</suiteTest>
            <suiteTest>HighPriority</suiteTest>
            <!-- Dynamic Memory – Ballooning -->
            <suiteTest>StartupLowCompete</suiteTest>
            <suiteTest>MinMemHonored</suiteTest>
            <suiteTest>MaxMemHonored</suiteTest>
            <suiteTest>SaveRestore</suiteTest>
            <suiteTest>CleanShutdown</suiteTest>

            <suiteTest>FCOPY_basic</suiteTest>
            <suiteTest>FCOPY_file_exists</suiteTest>
            <suiteTest>FCOPY_overwrite</suiteTest>
            <suiteTest>FCOPY_large_file</suiteTest>
            <suiteTest>FCOPY_non_ascii</suiteTest>
            <suiteTest>FCOPY_repeat</suiteTest>

            <suiteTest>Stress_IOzone</suiteTest>
            <suiteTest>Test50TimesReboot</suiteTest>
            <suiteTest>Sysbench</suiteTest>
            <suiteTest>LTPBasic</suiteTest>

            <suiteTest>Crash_single_core</suiteTest>
            <suiteTest>Crash_SMP</suiteTest>
            <suiteTest>Crash_NMI</suiteTest>
            <!-- Only for REDHAT. Test with crashkernel=auto -->
            <suiteTest>Crash_Auto_size</suiteTest>

            <suiteTest>FC_disks_detection</suiteTest>
            <suiteTest>FC_stressTest</suiteTest>
            <suiteTest>FC_SaveRestore_VM</suiteTest>
            <suiteTest>FC_disks_multipath_detection</suiteTest>
            <suiteTest>FC_WWN_basic</suiteTest>
        </suiteTests>
    </suite>
    </testSuites>

    <testCases>
    <!-- CORE Tests -->
    <test>
        <testName>VMHeartBeat</testName>
        <testScript>SetupScripts\INST_LIS_TestVMHeartbeat.ps1</testScript>
        <timeout>600</timeout>
        <onError>Continue</onError>
        <noReboot>True</noReboot>
        <testParams>
            <param>TC_COVERED=CORE-03</param>
        </testParams>
    </test>

    <test>
        <testName>TimeSync_NTP</testName>
        <testScript>CORE_TimeSync_NTP.sh</testScript>
        <files>remote-scripts/ica/CORE_TimeSync_NTP.sh,remote-scripts/ica/utils.sh</files>
        <timeout>600</timeout>
        <onError>Continue</onError>
        <testParams>
            <param>TZONE=America/Los_Angeles</param>
            <param>TC_COVERED=CORE-04</param>
        </testParams>
    </test>

    <test>
        <testName>TimeSync</testName>
        <testScript>SetupScripts\INST_LIS_TimeSync.ps1</testScript>
        <timeout>600</timeout>
        <onError>Continue</onError>
        <noReboot>True</noReboot>
        <testParams>
            <param>TC_COVERED=CORE-05</param>
            <param>TestDelay=10</param>
            <param>MaxTimeDiff=1.0</param>
        </testParams>
    </test>

    <test>
        <testName>TimeSync_SavedVM</testName>
        <testScript>SetupScripts\INST_timesync_savedVM.ps1</testScript>
        <timeout>800</timeout>
        <onError>Continue</onError>
        <noReboot>False</noReboot>
        <testparams>
            <param>TC_COVERED=CORE-06</param>
        </testparams>
    </test>

	<test>
		<testName>LISShutdownVM</testName>
		<setupScript>setupScripts\ChangeCPU.ps1</setupScript>
		<testScript>setupscripts\INST_LIS_TestVMShutdown.ps1</testScript>
		<testParams>
			<param>TC_COVERED=CORE-07</param>
			<param>vCPU=5</param>
		</testParams>
		<timeout>600</timeout>
		<onError>Continue</onError>
		<noReboot>False</noReboot>
	</test>

    <test>
        <testName>VerifyLisModules</testName>
        <testScript>LIS_VerifyHyperVIC.sh</testScript>
        <files>remote-scripts/ica/LIS_VerifyHyperVIC.sh</files>
        <timeout>600</timeout>
        <onError>Continue</onError>
        <noReboot>True</noReboot>
        <testParams>
            <param>TC_COVERED=CORE-09,CORE-10</param>
            <param>HYPERV_MODULES=(hv_vmbus hv_netvsc hid_hyperv hv_utils hv_storvsc)</param>
        </testParams>
    </test>

    <test>
        <testName>Multi_Cpu_Test</testName>
        <testScript>setupscripts\ChangeCPUIterated.ps1</testScript>
        <timeout>1600</timeout>
        <onError>Continue</onError>
        <noReboot>False</noReboot>
        <testParams>
            <param>TC_COVERED=CORE-11</param>
        </testParams>
    </test>

    <test>
        <testName>Verify_LISModules_Version</testName>
        <testScript>CORE_LISmodules_version.sh</testScript>
        <files>remote-scripts/ica/CORE_LISmodules_version.sh</files>
        <timeout>600</timeout>
        <onError>Continue</onError>
        <noReboot>True</noReboot>
        <testparams>
            <param>TC_COVERED=CORE-15</param>
            <param>HYPERV_MODULES=(hv_vmbus hv_netvsc hid_hyperv hv_utils hv_storvsc hv_balloon)</param>
        </testparams>
    </test>

    <test>
        <testName>VerifyItegratedShutdownService</testName>
        <testScript>setupscripts\INST_LIS_ShutdownServiceDisableEnable.ps1</testScript>
        <timeout>600</timeout>
        <onError>Continue</onError>
        <testParams>
            <param>TC_COVERED=CORE-16</param>
        </testParams>
    </test>

    <test>
        <testName>RebootDifferentMemSettings</testName>
        <testParams>
            <param>TC_COVERED=CORE-17</param>
            <param>MemSize=1GB,9GB,6GB</param>
        </testParams>
        <testScript>SetupScripts\CORE_RebootDiffMemory.ps1</testScript>
        <timeout>600</timeout>
        <onError>Continue</onError>
    </test>

    <test>
        <testName>StressReloadModules</testName>
        <setupScript>
            <file>setupscripts\CORE_EnableIntegrationServices.ps1</file>
            <file>setupscripts\ChangeCPU.ps1</file>
        </setupScript>
        <testScript>setupscripts\CORE_reload_modules.ps1</testScript>
        <timeout>10600</timeout>
        <testParams>
            <param>TC_COVERED=CORE-18</param>
            <param>VCPU=8</param>
        </testParams>
        <onError>Continue</onError>
        <noReboot>False</noReboot>
    </test>

    <test>
        <testName>CDmount</testName>
        <testScript>Core_LIS_CD.sh</testScript>
        <files>remote-scripts/ica/Core_LIS_CD.sh</files>
        <setupScript>setupscripts\InsertIsoInDvd.ps1</setupScript>
        <cleanupScript>setupScripts\RemoveIsoFromDvd.ps1</cleanupScript>
        <testparams>
            <param>IsoFilename=CDTEST.iso</param>
            <param>TC_COVERED=CORE-20</param>
        </testparams>
        <timeout>600</timeout>
        <onError>Continue</onError>
        <noReboot>False</noReboot>
    </test>

    <test>
        <testName>VCPU_verify_online</testName>
        <testScript>vcpu_verify_online.sh</testScript>
        <setupScript>setupScripts\ChangeCPU.ps1</setupScript>
        <files>remote-scripts/ica/vcpu_verify_online.sh</files>
        <timeout>600</timeout>
        <onError>Continue</onError>
        <noReboot>False</noReboot>
        <testParams>
            <param>TC_COVERED=CORE-21</param>
            <param>vCPU=4</param>
        </testParams>
    </test>

    <test>
        <testName>CheckNuma</testName>
        <setupScript>
            <file>SetupScripts\DM_DISABLE.ps1</file>
            <file>setupScripts\ChangeCPU.ps1</file>
        </setupScript>
        <testScript>setupScripts\NUMA.ps1</testScript>
        <files>remote-scripts\ica\utils.sh</files>
        <onError>Continue</onError>
        <cleanupScript>setupScripts\RevertSnapshot.ps1</cleanupScript>
        <testParams>
            <param>TC_COVERED=CORE-22</param>
            <param>enableDM=no</param>
            <param>staticMem=2048MB</param>
            <param>memWeight=0</param>
            <param>VCPU=4</param>
            <param>NumaNodes=1</param>
            <param>Sockets=1</param>
            <param>staticMem=2048MB</param>
            <param>memWeight=0</param>
            <param>snapshotName=ICABase</param>
        </testParams>
        <timeout>600</timeout>
    </test>

    <test>
        <testName>CheckNuma_Maximum</testName>
        <setupScript>
            <file>setupScripts\DM_DISABLE.ps1</file>
            <file>setupScripts\ChangeCPU.ps1</file>
        </setupScript>
        <testScript>setupScripts\NUMA.ps1</testScript>
        <files>remote-scripts\ica\utils.sh</files>
        <onError>Continue</onError>
        <testParams>
            <param>TC_COVERED=CORE-23</param>
            <param>VCPU=8</param>
            <param>NumaNodes=4</param>
            <param>Sockets=2</param>
            <param>MemSize=1024MB</param>
            <param>staticMem=2048MB</param>
            <param>memWeight=0</param>
        </testParams>
        <timeout>600</timeout>
    </test>

    <test>
        <testName>initrd_modules_check</testName>
        <testScript>modules_check.sh</testScript>
        <files>remote-scripts/ica/modules_check.sh</files>
        <testparams>
            <param>TC_COVERED=CORE-24</param>
            <param>hv_modules=(hv_vmbus.ko hv_storvsc.ko hv_netvsc.ko hyperv-keyboard.ko)</param>
        </testparams>
        <onError>Continue</onError>
        <timeout>600</timeout>
    </test>

    <test>
           <testName>Disable_NUMA_By_Kernel</testName>
           <setupScript>
             <file>setupScripts\DM_CONFIGURE_MEMORY.ps1</file>
             <file>setupScripts\ChangeCPU.ps1</file>
           </setupScript>
           <testScript>setupScripts\NUMA_Off_Kernel.ps1</testScript>
           <files>remote-scripts\ica\NUMA_off_kernel.sh</files>
           <files>remote-scripts\ica\NUMA_check.sh</files>
           <files>remote-scripts\ica\utils.sh</files>
           <timeout>600</timeout>
           <onError>Continue</onError>
           <noReboot>False</noReboot>
           <testparams>
               <param>TC_COVERED=CORE-25</param>
               <param>publicKey=id_rsa.pub</param>
               <param>enableDM=no</param>
               <param>startupMem=4096MB</param>
               <param>memWeight=20</param>
               <param>VCPU=4</param>
               <param>NumaNodes=1</param>
               <param>Sockets=1</param>
               <param>MemSize=1024MB</param>
           </testparams>
    </test>

    <test>
        <testName>check_clocksource</testName>
        <testScript>check_clocksource.sh</testScript>
        <files>remote-scripts/ica/check_clocksource.sh</files>
        <timeout>600</timeout>
        <onError>Continue</onError>
        <noReboot>False</noReboot>
        <testParams>
                    <param>TC_COVERED=CORE-26</param>
        </testParams>
    </test>


    <!-- KVP_Tests -->

        <test>
            <testName>SQM_Basic</testName>
            <testScript>SetupScripts\SQM_Basic.ps1</testScript>
            <timeout>600</timeout>
            <onError>Continue</onError>
            <noReboot>False</noReboot>
            <testparams>
                <param>TC_COVERED=SQM-01</param>
            </testparams>
        </test>

        <test>
            <testName>KVP_Basic</testName>
            <testScript>SetupScripts\KVP_Basic.ps1</testScript>
            <timeout>600</timeout>
            <onError>Continue</onError>
            <noReboot>True</noReboot>
            <testparams>
                <param>TC_COVERED=KVP-01</param>
                <param>DE_change=no</param>
            </testparams>
        </test>

        <test>
            <testName>KVP_Add_Key_Values</testName>
            <testScript>KVP_VerifyKeyValue.sh</testScript>
            <files>remote-scripts\ica\KVP_VerifyKeyValue.sh,
                tools/KVP/kvp_client32,tools/KVP/kvp_client64</files>
            <PreTest>setupScripts\AddKeyValue.ps1</PreTest>
            <timeout>600</timeout>
            <onError>Continue</onError>
            <noReboot>True</noReboot>
            <testparams>
                <param>TC_COVERED=KVP-02</param>
                <param>Key=EEE</param>
                <param>Value=555</param>
                <param>Pool=0</param>
            </testparams>
        </test>

        <test>
            <testName>KVP_Modify_Key_Values</testName>
            <testScript>KVP_VerifyKeyValue.sh</testScript>
            <files>remote-scripts\ica\KVP_VerifyKeyValue.sh,
                tools/KVP/kvp_client32,tools/KVP/kvp_client64</files>
            <preTest>setupscripts\ModifyKeyValue.ps1</preTest>
            <timeout>600</timeout>
            <onError>Continue</onError>
            <noReboot>True</noReboot>
            <testparams>
                <param>TC_COVERED=KVP-03</param>
                <param>Key=EEE</param>
                <param>Value=999</param>
                <param>Pool=0</param>
            </testparams>
        </test>

        <test>
            <testName>KVP_Remove_Key_Values</testName>
            <testScript>setupscripts\KVP_DeleteKeyValue.ps1</testScript>
            <timeout>600</timeout>
            <onError>Continue</onError>
            <noReboot>True</noReboot>
            <testparams>
                <param>TC_COVERED=KVP-04</param>
                <param>Key=EEE</param>
                <param>Value=999</param>
                <param>Pool=0</param>
            </testparams>
        </test>

        <test>
            <testName>KVP_Push_Key_Values</testName>
            <testScript>setupscripts\KVP_VerifyGuestCreatedItem.ps1</testScript>
            <files>tools/KVP/kvp_client32,tools/KVP/kvp_client64</files>
            <timeout>600</timeout>
            <onError>Abort</onError>
            <noReboot>True</noReboot>
            <testparams>
                <param>TC_COVERED=KVP-05</param>
                <param>Key=BBB</param>
                <param>Value=111</param>
                <param>sshKey=rhel5_id_rsa.ppk</param>
            </testparams>
        </test>

    	<test>
    		<testName>KVP_DeleteNonExistKVPOnGuest</testName>
    		<testScript>setupscripts\KVP_DeleteNonExistKeyValue.ps1</testScript>
    		<timeout>600</timeout>
    		<onError>Abort</onError>
    		<noReboot>True</noReboot>
    		<testparams>
    			<param>TC_COVERED=KVP-06</param>
    			<param>Key=AAA</param>
    			<param>Value=000</param>
    			<param>Pool=0</param>
    		</testparams>
    	</test>

    	<test>
    		<testName>KVP_ModifyNonExistKVPOnGuest</testName>
    		<testScript>setupscripts\KVP_ModifyNonExistKeyValue.ps1</testScript>
    		<timeout>600</timeout>
    		<onError>Abort</onError>
    		<noReboot>True</noReboot>
    		<testparams>
    			<param>TC_COVERED=KVP-07</param>
    			<param>Key=AAA</param>
    			<param>Value=000</param>
    			<param>Pool=0</param>
    		</testparams>
    	</test>

        <test>
            <testName>KVP_VerifyHostInjectedItems</testName>
            <testScript>KVP_VerifyHostInjectedItems.sh</testScript>
            <files>remote-scripts\ica\KVP_VerifyHostInjectedItems.sh,
                tools/KVP/kvp_client32,tools/KVP/kvp_client64</files>
            <timeout>600</timeout>
            <onError>Abort</onError>
            <noReboot>True</noReboot>
            <testparams>
                <param>TC_COVERED=KVP-10</param>
                <param>Pool=3</param>
                <param>Items=11</param>
            </testparams>
        </test>

    <!-- Stress Tests -->
    <test>
        <testName>Stress_IOzone</testName>
        <testScript>Stress_IOzone.sh</testScript>
        <files>remote-scripts/ica/Stress_IOzone.sh</files>
        <setupScript>setupScripts\Add-VHDXForResize.ps1</setupScript>
        <cleanupScript>SetupScripts\Remove-VHDXHardDisk.ps1</cleanupScript>
        <timeout>3500</timeout>
        <testParams>
            <param>SCSI=0,1,Fixed,512,40GB</param>
            <param>Type=Fixed</param>
            <param>SectorSize=512</param>
            <param>DefaultSize=15GB</param>
            <param>FILE_NAME=iozone3_420.tar</param>
        </testParams>
        <onError>Continue</onError>
        <noReboot>False</noReboot>
    </test>

    <test>
        <testName>Test50TimesReboot</testName>
        <testScript>setupScripts\Test50TimesReboot.ps1</testScript>
        <timeout>2000</timeout>
        <onError>Continue</onError>
        <noReboot>False</noReboot>
    </test>

    <test>
        <testName>Sysbench</testName>
        <testScript>Sysbench.sh</testScript>
        <files>remote-scripts/ica/Sysbench.sh</files>
        <testParams>
            <param>TEST_FILE=(seqwr seqrewr seqrd rndrd rndwr rndrw)</param>
        </testParams>
        <timeout>800</timeout>
    </test>

    <test>
        <testName>LTPBasic</testName>
        <testScript>LTP_test.sh</testScript>
        <files>remote-scripts/ica/LTP_test.sh</files>
        <timeout>7200</timeout>
        <onError>Continue</onError>
        <testparams>
            <param>TC_COVERED=LTP-01</param>
        </testparams>
        </test>

     <!-- kdump tests -->
    <test>
        <testName>Crash_single_core</testName>
        <setupScript>
            <file>setupscripts\ChangeCPU.ps1</file>
            <file>setupScripts\SetVMMemory.ps1</file>
        </setupScript>
        <testScript>setupScripts\kdump.ps1</testScript>
        <testParams>
            <!-- for Ubuntu use min 384M -->
            <param>crashkernel=256M@128M</param>
            <param>TC_COVERED=KDUMP-01</param>
            <param>VCPU=1</param>
            <param>VMMemory=4GB</param>
        </testParams>
        <timeout>600</timeout>
    </test>

    <test>
        <testName>Crash_SMP</testName>
        <setupScript>
            <file>setupscripts\ChangeCPU.ps1</file>
            <file>setupScripts\SetVMMemory.ps1</file>
        </setupScript>
        <testScript>setupscripts\kdump.ps1</testScript>
        <testParams>
            <!-- for Ubuntu use min 384M -->
            <param>crashkernel=256M@128M</param>
            <param>TC_COVERED=KDUMP-02</param>
            <param>VCPU=2</param>
            <param>VMMemory=2GB</param>
        </testParams>
        <timeout>600</timeout>
    </test>

    <test>
        <testName>Crash_NMI</testName>
        <setupScript>
            <file>setupscripts\ChangeCPU.ps1</file>
            <file>setupScripts\SetVMMemory.ps1</file>
        </setupScript>
        <testScript>setupscripts\kdump.ps1</testScript>
        <testParams>
            <!-- for Ubuntu use min 384M -->
            <param>crashkernel=384M</param>
            <param>TC_COVERED=KDUMP-03</param>
            <param>VCPU=3</param>
            <param>VMMemory=3GB</param>
            <param>NMI=1</param>
        </testParams>
        <timeout>600</timeout>
    </test>

    <test>
        <testName>Crash_Auto_size</testName>
        <setupScript>
            <file>setupscripts\ChangeCPU.ps1</file>
            <file>setupScripts\SetVMMemory.ps1</file>
        </setupScript>
        <testScript>setupScripts\kdump.ps1</testScript>
        <testParams>
            <!-- Minimum RAM=2GB -->
            <param>crashkernel=auto</param>
            <param>TC_COVERED=KDUMP-04</param>
            <param>VCPU=2</param>
            <param>VMMemory=2GB</param>
        </testParams>
        <timeout>600</timeout>
    </test>

     <!-- NET_Tests -->

    <test>
        <testName>InternalNetwork</testName>
        <setupScript>SetupScripts\NET_ADD_NIC_MAC.ps1</setupScript>
        <testParams>
            <param>NIC=NetworkAdapter,Internal,Internal,001600112200</param>
            <param>TC_COVERED=NET-04</param>
            <param>STATIC_IP=169.254.159.9</param>
            <param>NETMASK=255.255.0.0</param>
            <param>PING_SUCC=169.254.159.8</param>
            <param>PING_FAIL=8.8.4.4</param>
            <param>PING_FAIL2=192.168.2.2</param>
        </testParams>
        <testScript>NET_TEST_NETWORK.sh</testScript>
        <files>remote-scripts/ica/NET_TEST_NETWORK.sh,remote-scripts/ica/utils.sh</files>
        <cleanupScript>SetupScripts\NET_REMOVE_NIC_MAC.ps1</cleanupScript>
        <timeout>800</timeout>
    </test>

    <test>
        <testName>External</testName>
        <setupScript>SetupScripts\NET_ADD_NIC_MAC.ps1</setupScript>
        <testParams>
            <param>NIC=NetworkAdapter,External,External,001600112200</param>
            <param>TC_COVERED=NET-05</param>
            <param>PING_SUCC=8.8.4.4</param>
            <param>PING_FAIL=192.168.2.1</param>
            <param>PING_FAIL2=10.10.10.5</param>
        </testParams>
        <testScript>NET_TEST_NETWORK.sh</testScript>
        <files>remote-scripts/ica/NET_TEST_NETWORK.sh,remote-scripts/ica/utils.sh</files>
        <cleanupScript>SetupScripts\NET_REMOVE_NIC_MAC.ps1</cleanupScript>
        <timeout>800</timeout>
    </test>

        <test>
            <testName>GuestOnlyNetwork</testName>
            <setupScript>
                <file>setupscripts\RevertSnapshot.ps1</file>
                <file>setupscripts\NET_ADD_NIC_MAC.ps1</file>
                <file>setupscripts\StartVM.ps1</file>
            </setupScript>
        <testParams>
            <param>NIC=NetworkAdapter,Private,Private,001600112200</param>
            <param>TC_COVERED=NET-06</param>
            <param>STATIC_IP=10.10.10.10</param>
            <param>STATIC_IP2=10.10.10.20</param>
            <param>NETMASK=255.255.0.0</param>
        </testParams>
        <testScript>setupscripts\NET_PRIVATE_NETWORK.ps1</testScript>
        <files>remote-scripts/ica/utils.sh</files>
        <cleanupScript>SetupScripts\NET_REMOVE_NIC_MAC.ps1</cleanupScript>
        <timeout>800</timeout>
    </test>

     <test>
        <testName>MultipleNIC</testName>
        <setupScript>
            <file>setupscripts\RevertSnapshot.ps1</file>
            <file>setupscripts\NET_ADD_NIC_MAC.ps1</file>
        </setupScript>
        <testParams>
            <param>NIC=NetworkAdapter,External,External,001600112200</param>
            <param>NIC=NetworkAdapter,External,External,001600112201</param>
            <param>TC_COVERED=NET-07</param>
            <!-- <param>NETMASK=255.255.255.0</param> -->
            <param>PING_SUCC=8.8.4.4</param>
            <param>PING_FAIL=192.168.0.1</param>
            <param>PING_FAIL2=192.168.0.254</param>
            <!-- <param>GATEWAY=192.168.0.1</param> -->
        </testParams>
        <testScript>NET_TEST_NETWORK.sh</testScript>
        <files>remote-scripts/ica/NET_TEST_NETWORK.sh,remote-scripts/ica/utils.sh</files>
        <cleanupScript>SetupScripts\NET_REMOVE_NIC_MAC.ps1</cleanupScript>
        <timeout>800</timeout>
    </test>

    <test>
        <testName>StaticMAC</testName>
        <setupScript>SetupScripts\NET_ADD_NIC_MAC.ps1</setupScript>
        <testParams>
            <param>NIC=NetworkAdapter,External,External,001600112233</param>
            <param>TC_COVERED=NET-09</param>
            <param>MAC=00:16:00:11:22:33</param>
            <param>REMOTE_SERVER=8.8.4.4</param>
            <param>LO_IGNORE=yes</param>
        </testParams>
        <testScript>NET_STATIC_MAC.sh</testScript>
        <files>remote-scripts/ica/NET_STATIC_MAC.sh,remote-scripts/ica/utils.sh</files>
        <cleanupScript>SetupScripts\NET_REMOVE_NIC_MAC.ps1</cleanupScript>
        <timeout>800</timeout>
    </test>

    <!-- The following two tests are actually one single TC -->

    <test>
        <testName>ChangeNetTypeInternal</testName>
        <setupScript>SetupScripts\NET_ADD_NIC_MAC.ps1</setupScript>
        <pretest>setupScripts\NET_SWITCH_NIC_MAC.ps1</pretest>
        <testParams>
            <param>NIC=NetworkAdapter,External,External,001600112200</param>
            <param>SWITCH=NetworkAdapter,Internal,Internal,001600112200</param>
            <param>TC_COVERED=NET-13</param>
            <param>STATIC_IP=169.254.159.9</param>
            <param>NETMASK=255.255.0.0</param>
            <param>PING_SUCC=169.254.159.8</param>
            <param>PING_FAIL=8.8.4.4</param>
            <param>PING_FAIL2=10.10.10.5</param>
        </testParams>
        <onError>Continue</onError>
        <noReboot>True</noReboot>
        <testScript>NET_TEST_NETWORK.sh</testScript>
        <files>remote-scripts/ica/NET_TEST_NETWORK.sh,remote-scripts/ica/utils.sh</files>
        <timeout>800</timeout>
    </test>

    <test>
        <testName>ChangeNetTypeGuest</testName>
            <setupScript>
                <file>setupscripts\RevertSnapshot.ps1</file>
                <file>setupscripts\NET_ADD_NIC_MAC.ps1</file>
                <file>setupscripts\StartVM.ps1</file>
            </setupScript>
        <testParams>
            <param>NIC=NetworkAdapter,External,External,001600112200</param>
            <param>SWITCH=NetworkAdapter,Private,Private,001600112200</param>
            <param>TC_COVERED=NET-13</param>
            <param>STATIC_IP=10.10.10.10</param>
            <param>STATIC_IP2=10.10.10.20</param>
            <param>NETMASK=255.255.0.0</param>
            <param>PING_FAIL=8.8.4.4</param>
            <param>PING_FAIL2=192.168.0.1</param>
        </testParams>
        <testScript>setupscripts\NET_PRIVATE_NETWORK.ps1</testScript>
        <files>remote-scripts/ica/utils.sh</files>
        <cleanupScript>SetupScripts\NET_REMOVE_NIC_MAC.ps1</cleanupScript>
        <timeout>800</timeout>
    </test>

    <!-- The preceding three tests are actually one single TC -->

    <test>
        <testName>NetworkMode</testName>
        <testScript>NET_PROMISC.sh</testScript>
        <files>remote-scripts/ica/NET_PROMISC.sh,remote-scripts/ica/utils.sh</files>
            <setupScript>
                <file>setupscripts\RevertSnapshot.ps1</file>
                <file>setupscripts\NET_ADD_NIC_MAC.ps1</file>
            </setupScript>
        <cleanupScript>SetupScripts\NET_REMOVE_NIC_MAC.ps1</cleanupScript>
        <testParams>
            <param>NIC=NetworkAdapter,External,External,001600112200</param>
            <param>TC_COVERED=NET-12</param>
            <param>REMOTE_SERVER=8.8.4.4</param>
            <param>SnapshotName=ICABase</param>
        </testParams>
        <noReboot>False</noReboot>
        <timeout>600</timeout>
    </test>

    <test>
        <testName>JumboFrame</testName>
        <setupScript>
            <file>setupscripts\RevertSnapshot.ps1</file>
            <file>setupscripts\NET_ADD_NIC_MAC.ps1</file>
            <file>setupscripts\StartVM.ps1</file>
        </setupScript>
        <pretest>setupscripts\NET_SendIPtoVM.ps1</pretest>
        <testparams>
            <param>NIC=NetworkAdapter,Private,Private,001600112200</param>
            <param>TC_COVERED=NET-14</param>
            <param>STATIC_IP=10.10.10.10</param>
            <param>STATIC_IP2=10.10.10.20</param>
            <param>NETMASK=255.255.0.0</param>
            <param>MAC=001600112233</param>
            <param>REMOTE_USER=root</param>
        </testparams>
        <testScript>NET_JUMBO_FRAMES.sh</testScript>
        <files>remote-scripts/ica/NET_JUMBO_FRAMES.sh,remote-scripts/ica/utils.sh</files>
        <cleanupScript>SetupScripts\NET_REMOVE_NIC_MAC.ps1</cleanupScript>
        <onError>Continue</onError>
        <noReboot>False</noReboot>
        <timeout>1800</timeout>
        </test>

    <test>
        <testName>CopyLargeFile</testName>
        <setupScript>
                <file>setupscripts\RevertSnapshot.ps1</file>
                <file>setupscripts\NET_ADD_NIC_MAC.ps1</file>
                <file>setupscripts\StartVM.ps1</file>
        </setupScript>
        <testParams>
            <param>NIC=NetworkAdapter,External,External,001600112200</param>
            <param>TC_COVERED=NET-01</param>
            <param>MAC=001600112233</param>
            <param>ZERO_FILE=yes</param>
            <param>FILE_SIZE_GB=2</param>
            <param>REMOTE_USER=root</param>
        </testParams>
        <testScript>NET_COPY_LARGE.sh</testScript>
        <files>remote-scripts/ica/NET_COPY_LARGE.sh,remote-scripts/ica/utils.sh</files>
        <cleanupScript>SetupScripts\NET_REMOVE_NIC_MAC.ps1</cleanupScript>
        <timeout>8000</timeout>
    </test>

    <test>
        <testName>CopyFileDifferentMTU</testName>
        <setupScript>
            <file>setupscripts\RevertSnapshot.ps1</file>
            <file>setupscripts\NET_ADD_NIC_MAC.ps1</file>
            <file>setupscripts\StartVM.ps1</file>
        </setupScript>
        <pretest>setupscripts\NET_SendIPtoVM.ps1</pretest>
        <testParams>
            <param>NIC=NetworkAdapter,External,External,001600112200</param>
            <param>TC_COVERED=NET-13</param>
            <param>MAC=001600112233</param>
            <param>ZERO_FILE=yes</param>
            <param>FILE_SIZE_GB=1</param>
            <param>REMOTE_USER=root</param>
        </testParams>
        <testScript>NET_Copy_Different_MTU.sh</testScript>
        <files>remote-scripts/ica/NET_Copy_Different_MTU.sh,remote-scripts/ica/utils.sh</files>
        <cleanupScript>SetupScripts\NET_REMOVE_NIC_MAC.ps1</cleanupScript>
        <timeout>1800</timeout>
    </test>

        <test>
            <testName>CopyFileScp</testName>
            <setupScript>setupScripts\Add-VHDXForResize.ps1</setupScript>
            <testScript>setupscripts\NET_filecopy_scp.ps1</testScript>
            <files>remote-Scripts/ica/NET_scp_check_md5.sh</files>
            <cleanupScript>SetupScripts\Remove-VHDXHardDisk.ps1</cleanupScript>
            <timeout>3000</timeout>
            <testParams>
                    <param>TC_COVERED=NET-19</param>
                    <param>SCSI=1,0,Dynamic,512,15GB</param>
                    <param>Type=Fixed</param>
                    <param>SectorSize=512</param>
                    <param>DefaultSize=25GB</param>
                    <param>ControllerType=SCSI</param>
            </testParams>
        </test>

    <test>
        <testName>Network_Hang_Vxlan</testName>
        <setupScript>SetupScripts\NET_ADD_NIC_MAC.ps1</setupScript>
        <testParams>
            <param>NIC=NetworkAdapter,Private,Private,001600112200</param>
            <param>STATIC_IP1=10.10.10.10</param>
            <param>STATIC_IP2=10.10.10.20</param>
            <param>NETMASK=255.255.255.0</param>
        </testParams>
        <testScript>setupscripts\NET_Hang_Vxlan.ps1</testScript>
        <files>remote-scripts/ica/utils.sh</files>
        <timeout>800</timeout>
    </test>

    <test>
        <testName>VlanTrunking</testName>
            <setupScript>
                <file>setupscripts\RevertSnapshot.ps1</file>
                <file>setupscripts\NET_ADD_NIC_MAC.ps1</file>
            </setupScript>
        <testParams>
            <param>NIC=NetworkAdapter,Private,Private,001600112200</param>
            <param>TC_COVERED=NET-01</param>
            <param>VM_VLAN_ID=2</param>
            <param>NATIVE_VLAN_ID=10</param>
            <param>SnapshotName=ICABase</param>
        </testParams>
        <testScript>SetupScripts\NET_VLAN_TRUNKING.ps1</testScript>
        <files>remote-scripts/ica/utils.sh</files>
        <cleanupScript>SetupScripts\NET_REMOVE_NIC_MAC.ps1</cleanupScript>
        <timeout>800</timeout>
    </test>

    <test>
        <testName>VlanTagging</testName>
            <setupScript>
                <file>setupscripts\RevertSnapshot.ps1</file>
                <file>setupscripts\NET_ADD_NIC_MAC.ps1</file>
            </setupScript>
        <testParams>
            <param>NIC=NetworkAdapter,External,External,001600112200</param>
            <param>TC_COVERED=NET-01</param>
            <param>VLAN_ID=2</param>
        </testParams>
        <testScript>SetupScripts\NET_VLAN_TAGGING.ps1</testScript>
        <files>remote-scripts/ica/utils.sh</files>
        <cleanupScript>SetupScripts\NET_REMOVE_NIC_MAC.ps1</cleanupScript>
        <timeout>1000</timeout>
    </test>

    <test>
        <testName>OperState</testName>
             <setupScript>
                <file>setupscripts\RevertSnapshot.ps1</file>
                <file>setupscripts\NET_ADD_NIC_MAC.ps1</file>
            </setupScript>
        <testParams>
            <param>NIC=NetworkAdapter,External,External,001600112200</param>
            <param>TC_COVERED=NET-22</param>
        </testParams>
        <testScript>NET_OPERSTATE.sh</testScript>
        <files>remote-scripts/ica/NET_OPERSTATE.sh,remote-scripts/ica/utils.sh</files>
        <cleanupScript>SetupScripts\NET_REMOVE_NIC_MAC.ps1</cleanupScript>
        <timeout>800</timeout>
    </test>

	<test>
        <testName>IPInjection</testName>
        <setupScript>
            <file>setupscripts\RevertSnapshot.ps1</file>
        </setupScript>
        <testParams>
            <param>TC_COVERED=NET_LIVEMIG-09</param>
        </testParams>
        <testScript>SetupScripts\NET_ipinjection.ps1</testScript>
        <files>remote-scripts/ica/utils.sh</files>
        <timeout>600</timeout>
    </test>

    <!-- The following test requires a Gen 2 VM -->
    <test>
        <testName>HotAddMultiNIC</testName>
        <testScript>SetupScripts\NET_HotAddMultiNIC.ps1</testScript>
        <files>remote-scripts\ica\NET_VerifyHotAddMultiNIC.sh</files>
        <timeout>1800</timeout>
        <onError>Continue</onError>
        <noReboot>True</noReboot>
        <testparams>
            <param>TC_COVERED=NET-??</param>
            <param>Switch_Name=External</param>
        </testparams>
    </test>
    <!-- The following test requires a Gen 2 VM -->
    <test>
        <testName>BootNoNicHotAddNic</testName>
        <testScript>SetupScripts\NET_BootNoNICHotAddNIC.ps1</testScript>
        <files>remote-scripts\ica\NET_VerifyBootNoNIC.sh,tools\KVP\kvp_client</files>
        <timeout>1800</timeout>
        <onError>Continue</onError>
        <noReboot>False</noReboot>
        <testparams>
            <param>TC_COVERED=NET-??</param>
            <param>Switch_Name=External</param>
        </testparams>
    </test>

    <test>
        <testName>HotAddRemoveNIC</testName>
        <setupScript>
            <file>setupscripts\RevertSnapshot.ps1</file>
        </setupScript>
        <testScript>SetupScripts\NET_HotAddRemoveNIC.ps1</testScript>
        <files>remote-scripts\ica\NET_VerifyHotAddMultiNIC.sh,remote-scripts\ica\utils.sh</files>
        <timeout>1800</timeout>
        <onError>Continue</onError>
        <testparams>
            <param>TC_COVERED=NET-17</param>
            <param>Switch_Name=External</param>
        </testparams>
    </test>

    <!-- NMI_Tests -->
    <test>
        <testName>NMI_Send_Interrupt</testName>
        <testScript>setupscripts\NMI_Send_Interrupt.ps1</testScript>
        <timeout>300</timeout>
        <onError>Continue</onError>
        <noReboot>True</noReboot>
        <testParams>
                <param>TC_COVERED=NMI-01</param>
        </testParams>
    </test>

    <test>
        <testName>NMI_Verify_Interrupt</testName>
        <testScript>nmi_verify_interrupt.sh</testScript>
        <files>remote-scripts\ica\nmi_verify_interrupt.sh</files>
        <timeout>300</timeout>
        <onError>Continue</onError>
        <noReboot>False</noReboot>
        <testParams>
            <param>TC_COVERED=NMI-01</param>
        </testParams>
    </test>

    <test>
        <testName>NMI_different_vmStates</testName>
        <testScript>setupscripts\NMI_different_vmStates.ps1</testScript>
        <timeout>300</timeout>
        <onError>Continue</onError>
        <noReboot>True</noReboot>
        <testParams>
            <param>TC_COVERED=NMI-03</param>
        </testParams>
    </test>

    <!-- STOR_VHDXResize -->

        <test>
            <testName>VHDxResizeToBigger512</testName>
            <testScript>SetupScripts\STOR_VHDXResize_Basic.ps1</testScript>
            <setupScript>SetupScripts\Add-VHDXForResize.ps1</setupScript>
            <cleanupScript>SetupScripts\Remove-VHDXHardDisk.ps1</cleanupScript>
            <files>remote-scripts/ica/STOR_VHDXResize_ReadWrite.sh</files>
            <files>remote-scripts/ica/check_traces.sh</files>
            <timeout>600</timeout>
            <onError>Continue</onError>
            <testparams>
                <param>Type=Dynamic</param>
                <param>SectorSize=512</param>
                <param>DefaultSize=3GB</param>
                <param>NewSize=4GB</param>
                <param>fileSystems=(ext4 ext3 xfs)</param>
                <param>ControllerType=SCSI</param>
                <param>TC_COVERED=STOR-VHDx-01a</param>
            </testparams>
        </test>
        <test>
            <testName>VHDxResizeToBigger4096</testName>
            <testScript>SetupScripts\STOR_VHDXResize_Basic.ps1</testScript>
            <setupScript>SetupScripts\Add-VHDXForResize.ps1</setupScript>
            <cleanupScript>SetupScripts\Remove-VHDXHardDisk.ps1</cleanupScript>
            <files>remote-scripts/ica/STOR_VHDXResize_ReadWrite.sh</files>
            <files>remote-scripts/ica/check_traces.sh</files>
            <timeout>600</timeout>
            <onError>Continue</onError>
            <testparams>
                <param>Type=Dynamic</param>
                <param>SectorSize=4096</param>
                <param>DefaultSize=3GB</param>
                <param>NewSize=4GB</param>
                <param>fileSystems=(ext4 ext3 xfs)</param>
                <param>ControllerType=SCSI</param>
                <param>TC_COVERED=STOR-VHDx-01b</param>
            </testparams>
        </test>

        <test>
            <testName>VHDxResizeToBigger512_Fixed_IDE</testName>
            <testScript>SetupScripts\STOR_VHDXResize_Basic.ps1</testScript>
            <setupScript>SetupScripts\Add-VHDXForResize.ps1</setupScript>
            <cleanupScript>SetupScripts\Remove-VHDXHardDisk.ps1</cleanupScript>
            <files>remote-scripts/ica/STOR_VHDXResize_ReadWrite.sh</files>
            <files>remote-scripts/ica/check_traces.sh</files>
            <timeout>600</timeout>
            <onError>Continue</onError>
            <testparams>
                <param>Type=Fixed</param>
                <param>SectorSize=512</param>
                <param>DefaultSize=1GB</param>
                <param>NewSize=2GB</param>
                <param>fileSystems=(ext4 ext3 xfs)</param>
                <param>ControllerType=IDE</param>
                <param>TC_COVERED=STOR-VHDx-105</param>
             </testparams>
       </test>
       <test>
            <testName>VHDxResizeToBigger512_Dynamic_IDE</testName>
            <testScript>SetupScripts\STOR_VHDXResize_Basic.ps1</testScript>
            <setupScript>SetupScripts\Add-VHDXForResize.ps1</setupScript>
            <cleanupScript>SetupScripts\Remove-VHDXHardDisk.ps1</cleanupScript>
            <files>remote-scripts/ica/STOR_VHDXResize_ReadWrite.sh</files>
            <files>remote-scripts/ica/check_traces.sh</files>
            <timeout>600</timeout>
            <onError>Continue</onError>
            <testparams>
                <param>Type=Dynamic</param>
                <param>SectorSize=512</param>
                <param>DefaultSize=1GB</param>
                <param>NewSize=4GB</param>
                <param>fileSystems=(ext4 ext3 xfs)</param>
                <param>ControllerType=IDE</param>
                <param>TC_COVERED=STOR-VHDx-106</param>
            </testparams>
       </test>

        <test>
            <testName>VHDxResizeToSmaller512</testName>
            <testScript>SetupScripts\STOR_VHDXResize_Basic.ps1</testScript>
            <setupScript>SetupScripts\Add-VHDXForResize.ps1</setupScript>
            <cleanupScript>SetupScripts\Remove-VHDXHardDisk.ps1</cleanupScript>
            <files>remote-scripts/ica/STOR_VHDXResize_ReadWrite.sh</files>
            <files>remote-scripts/ica/check_traces.sh</files>
            <timeout>600</timeout>
            <onError>Continue</onError>
            <testparams>
                <param>Type=Dynamic</param>
                <param>SectorSize=512</param>
                <param>DefaultSize=3GB</param>
                <param>NewSize=2GB</param>
                <param>fileSystems=(ext4 ext3 xfs)</param>
                <param>ControllerType=SCSI</param>
                <param>TC_COVERED=STOR-VHDx-02a</param>
            </testparams>
        </test>

        <test>
            <testName>VHDxResizeToSmaller4096</testName>
            <testScript>SetupScripts\STOR_VHDXResize_Basic.ps1</testScript>
            <setupScript>SetupScripts\Add-VHDXForResize.ps1</setupScript>
            <cleanupScript>SetupScripts\Remove-VHDXHardDisk.ps1</cleanupScript>
            <files>remote-scripts/ica/STOR_VHDXResize_ReadWrite.sh</files>
            <files>remote-scripts/ica/check_traces.sh</files>
            <timeout>600</timeout>
            <onError>Continue</onError>
            <testparams>
                <param>Type=Dynamic</param>
                <param>SectorSize=4096</param>
                <param>DefaultSize=3GB</param>
                <param>NewSize=2GB</param>
                <param>fileSystems=(ext4 ext3 xfs)</param>
                <param>ControllerType=SCSI</param>
                <param>TC_COVERED=STOR-VHDx-02b</param>
            </testparams>
        </test>

        <test>
            <testName>VHDxResizeGrowShrink</testName>
            <testScript>SetupScripts\STOR_VHDXResize_GrowShrink.ps1</testScript>
            <setupScript>SetupScripts\Add-VHDXForResize.ps1</setupScript>
            <cleanupScript>SetupScripts\Remove-VHDXHardDisk.ps1</cleanupScript>
            <files>remote-scripts/ica/STOR_VHDXResize_ReadWrite.sh</files>
            <files>remote-scripts/ica/check_traces.sh</files>
            <timeout>600</timeout>
            <onError>Continue</onError>
            <testparams>
                <param>Type=Dynamic</param>
                <param>SectorSize=512</param>
                <param>DefaultSize=3GB</param>
                <param>growSize=4GB</param>
                <param>shrinkSize=3GB</param>
                <param>fileSystems=(ext4 ext3 xfs)</param>
                <param>ControllerType=SCSI</param>
                <param>TC_COVERED=STOR-VHDx-03</param>
            </testparams>
        </test>

        <test>
            <testName>VHDxResizeGrowFilesystem512</testName>
            <testScript>SetupScripts\STOR_VHDXResize_GrowFS.ps1</testScript>
            <setupScript>SetupScripts\Add-VHDXForResize.ps1</setupScript>
            <cleanupScript>SetupScripts\Remove-VHDXHardDisk.ps1</cleanupScript>
            <files>remote-scripts/ica/STOR_VHDXResize_ReadWrite.sh</files>
            <files>remote-scripts/ica/check_traces.sh</files>
            <timeout>600</timeout>
            <onError>Continue</onError>
            <testparams>
                <param>Type=Dynamic</param>
                <param>SectorSize=512</param>
                <param>DefaultSize=3GB</param>
                <param>NewSize=4GB</param>
                <param>fileSystems=(ext4 ext3 xfs)</param>
                <param>ControllerType=SCSI</param>
                <param>TC_COVERED=STOR-VHDx-04a</param>
            </testparams>
        </test>

        <test>
            <testName>VHDxResizeGrowFilesystem4096</testName>
            <testScript>SetupScripts\STOR_VHDXResize_GrowFS.ps1</testScript>
            <setupScript>SetupScripts\Add-VHDXForResize.ps1</setupScript>
            <cleanupScript>SetupScripts\Remove-VHDXHardDisk.ps1</cleanupScript>
            <files>remote-scripts/ica/STOR_VHDXResize_ReadWrite.sh</files>
            <files>remote-scripts/ica/check_traces.sh</files>
            <timeout>600</timeout>
            <onError>Continue</onError>
            <testparams>
                <param>Type=Dynamic</param>
                <param>SectorSize=4096</param>
                <param>DefaultSize=3GB</param>
                <param>NewSize=4GB</param>
                <param>fileSystems=(ext4 ext3 xfs)</param>
                <param>ControllerType=SCSI</param>
                <param>TC_COVERED=STOR-VHDx-04b</param>
            </testparams>
        </test>

        <test>
            <testName>VHDxResizeOver2TB</testName>
            <testScript>SetupScripts\STOR_VHDXResize_DiskOver2TB.ps1</testScript>
            <setupScript>SetupScripts\Add-VHDXForResize.ps1</setupScript>
            <cleanupScript>SetupScripts\Remove-VHDXHardDisk.ps1</cleanupScript>
            <files>remote-scripts/ica/STOR_VHDXResize_ReadWrite.sh</files>
            <files>remote-scripts/ica/check_traces.sh</files>
            <timeout>3000</timeout>
            <onError>Continue</onError>
            <testparams>
                <param>Type=Dynamic</param>
                <param>SectorSize=512</param>
                <param>DefaultSize=127GB</param>
                <param>NewSize=2304GB</param>
                <param>fileSystems=(ext4 ext3 xfs)</param>
                <param>ControllerType=SCSI</param>
                <param>TC_COVERED=STOR-VHDx-05</param>
            </testparams>
        </test>

        <test>
            <testName>VHDxResizeOver2TB_IDE</testName>
            <testScript>SetupScripts\STOR_VHDXResize_Basic.ps1</testScript>
            <setupScript>SetupScripts\Add-VHDXForResize.ps1</setupScript>
            <cleanupScript>SetupScripts\Remove-VHDXHardDisk.ps1</cleanupScript>
            <files>remote-scripts/ica/STOR_VHDXResize_ReadWrite.sh</files>
            <files>remote-scripts/ica/check_traces.sh</files>
            <timeout>3000</timeout>
            <onError>Continue</onError>
            <testparams>
                <param>Type=Dynamic</param>
                <param>SectorSize=512</param>
                <param>DefaultSize=127GB</param>
                <param>NewSize=2304GB</param>
                <param>fileSystems=(ext4 ext3 xfs)</param>
                <param>TC_COVERED=STOR-VHDx-107</param>
                 <param>ControllerType=IDE</param>
            </testparams>
        </test>

        <test>
            <testName>VHDxResizeLiveMigration</testName>
            <testScript>SetupScripts\STOR_VHDXResize_BasicLM.ps1</testScript>
            <setupScript>SetupScripts\Add-VHDXForResize.ps1</setupScript>
            <cleanupScript>SetupScripts\Remove-VHDXHardDisk.ps1</cleanupScript>
            <files>remote-scripts/ica/STOR_VHDXResize_ReadWrite.sh</files>
            <files>remote-scripts/ica/check_traces.sh</files>
            <timeout>600</timeout>
            <onError>Continue</onError>
            <testparams>
                <param>Type=Dynamic</param>
                <param>SectorSize=512</param>
                <param>DefaultSize=3GB</param>
                <param>NewSize=4GB</param>
                <param>fileSystems=(ext4 ext3 xfs)</param>
                <param>ControllerType=SCSI</param>
                <param>TC_COVERED=STOR-VHDx-06</param>
            </testparams>
        </test>

    <!-- StorVHDX -->

    <test>
        <testName>VHDx_SCSI_0_1_Dynamic_Big</testName>
        <setupScript>SetupScripts\Add-VHDXForResize.ps1</setupScript>
        <cleanupScript>SetupScripts\Remove-VHDXHardDisk.ps1</cleanupScript>
        <testParams>
            <param>Type=Dynamic</param>
            <param>SectorSize=512</param>
            <param>DefaultSize=8TB</param>
            <!-- <param>Path=G:\VHDs</param> -->
            <param>fileSystems=(ext4 xfs btrfs)</param>
            <param>SCSI=0,1,Fixed,512,8TB</param>
            <param>TC_COVERED=STOR-32</param>
        </testParams>
        <testScript>STOR_Big_Disk.sh</testScript>
        <files>remote-scripts/ica/STOR_Big_Disk.sh</files>
        <timeout>10800</timeout>
    </test>

    <test>
        <testName>VHDx_HotADD_Dynamic_SCSI_SMP</testName>
        <testScript>STOR_Lis_Disk.sh</testScript>
        <files>remote-scripts/ica/STOR_Lis_Disk.sh</files>
        <files>remote-scripts/ica/check_traces.sh</files>
        <setupScript>setupScripts\ChangeCPU.ps1</setupScript>
        <preTest>setupscripts\AddVhdxHardDisk.ps1</preTest>
        <cleanupScript>setupScripts\RemoveVhdxHardDisk.ps1</cleanupScript>
        <timeout>18000</timeout>
        <testparams>
            <param>SCSI=0,1,Dynamic,512</param>
            <param>SCSI=0,2,Dynamic,4096</param>
            <param>TC_COVERED=STOR-44,STOR-58</param>
            <param>VCPU=4</param>
        </testparams>
        <onError>Continue</onError>
        <noReboot>False</noReboot>
    </test>

    <test>
        <testName>VHDx_MultiDiskSCSI_Dynamic</testName>
        <testScript>STOR_Lis_Disk.sh</testScript>
        <files>remote-scripts/ica/STOR_Lis_Disk.sh</files>
        <files>remote-scripts/ica/check_traces.sh</files>
        <setupScript>SetupScripts\AddVhdxHardDisk.ps1</setupScript>
        <cleanupScript>SetupScripts\RemoveVhdxHardDisk.ps1</cleanupScript>
        <timeout>18000</timeout>
        <testparams>
            <param>SCSI=0,1,Dynamic,512</param>
            <param>SCSI=0,2,Dynamic,512</param>
            <param>TC_COVERED=STOR-33,STOR-40</param>
        </testparams>
        <onError>Continue</onError>
    </test>

    <test>
        <testName>VHDx_MultiDiskSCSI_Fixed</testName>
        <testScript>STOR_Lis_Disk.sh</testScript>
        <files>remote-scripts/ica/STOR_Lis_Disk.sh</files>
        <files>remote-scripts/ica/check_traces.sh</files>
        <setupScript>SetupScripts\AddVhdxHardDisk.ps1</setupScript>
        <cleanupScript>SetupScripts\RemoveVhdxHardDisk.ps1</cleanupScript>
        <timeout>18000</timeout>
        <testparams>
            <param>SCSI=0,1,Fixed,512</param>
            <param>SCSI=0,2,Fixed,512</param>
            <param>TC_COVERED=STOR-35</param>
        </testparams>
        <onError>Continue</onError>
    </test>

    <test>
        <testName>VHDx_AddDiff_Disk_SCSI</testName>
        <testScript>setupscripts\DiffDiskGrowthTestCase.ps1</testScript>
        <setupScript>setupscripts\DiffDiskGrowthSetup.ps1</setupScript>
        <cleanupScript>setupscripts\DiffDiskGrowthCleanup.ps1</cleanupScript>
        <timeout>18000</timeout>
        <testparams>
            <param>SCSI=0,1,Diff</param>
            <param>TC_COVERED=STOR-27</param>
            <param>FILESYS=ext3</param>
            <param>vhdFormat=vhdx</param>
        </testparams>
        <onError>Continue</onError>
    </test>
    <test>
        <testName>VHDx_HotADD_Multi_Dynamic_SCSI</testName>
        <testScript>STOR_Lis_Disk.sh</testScript>
        <files>remote-scripts/ica/STOR_Lis_Disk.sh</files>
        <files>remote-scripts/ica/check_traces.sh</files>
        <preTest>setupscripts\AddVhdxHardDisk.ps1</preTest>
        <cleanupScript>setupScripts\RemoveVhdxHardDisk.ps1</cleanupScript>
        <timeout>18000</timeout>
        <testparams>
            <param>SCSI=0,1,Dynamic,512</param>
            <param>SCSI=0,2,Dynamic,512</param>
            <param>TC_COVERED=STOR-41,STOR-43</param>
        </testparams>
        <onError>Continue</onError>
        <noReboot>False</noReboot>
    </test>
    <test>
        <testName>VHDx_HotRemove_Multi_Dynamic_SCSI</testName>
        <testScript>STOR_hot_remove.sh</testScript>
        <files>remote-scripts/ica/STOR_hot_remove.sh</files>
            <files>remote-scripts/ica/check_traces.sh</files>
        <setupScript>setupScripts\AddVhdxHardDisk.ps1</setupScript>
        <preTest>setupScripts\RemoveVhdxHardDisk.ps1</preTest>
        <timeout>18000</timeout>
        <testparams>
            <param>SCSI=0,1,Dynamic,512</param>
            <param>SCSI=0,2,Dynamic,512</param>
            <param>TC_COVERED=STOR-42,STOR-43</param>
        </testparams>
        <onError>Continue</onError>
        <noReboot>False</noReboot>
    </test>

    <test>
        <testName>VHDx_HotRemove_Dynamic_SCSI_SMP</testName>
        <testScript>STOR_hot_remove.sh</testScript>
        <setupscript>
                <file>setupscripts\ChangeCPU.ps1</file>
                <file>setupscripts\AddVhdxHardDisk.ps1</file>
        </setupscript>
        <preTest>setupScripts\RemoveVhdxHardDisk.ps1</preTest>
        <files>remote-scripts/ica/STOR_hot_remove.sh</files>
            <files>remote-scripts/ica/check_traces.sh</files>
        <timeout>18000</timeout>
        <testparams>
            <param>SCSI=0,1,Dynamic,512</param>
            <param>SCSI=0,2,Dynamic,4096</param>
            <param>VCPU=4</param>
            <param>TC_COVERED=STOR-31,STOR-42</param>
        </testparams>
        <onError>Continue</onError>
        <noReboot>False</noReboot>
    </test>

    <test>
        <testName>VHDx_4k_MultiDiskSCSI_Dynamic</testName>
        <testScript>STOR_Lis_Disk.sh</testScript>
        <files>remote-scripts/ica/STOR_Lis_Disk.sh</files>
        <files>remote-scripts/ica/check_traces.sh</files>
        <setupScript>SetupScripts\AddVhdxHardDisk.ps1</setupScript>
        <cleanupScript>SetupScripts\RemoveVhdxHardDisk.ps1</cleanupScript>
        <timeout>18000</timeout>
        <testparams>
            <param>SCSI=0,1,Dynamic,4096</param>
            <param>SCSI=0,2,Dynamic,4096</param>
            <param>TC_COVERED=STOR-49,STOR-54</param>
        </testparams>
        <onError>Continue</onError>
    </test>

    <test>
        <testName>VHDx_4k_MultiDiskSCSI_Fixed</testName>
        <testScript>STOR_Lis_Disk.sh</testScript>
        <files>remote-scripts/ica/STOR_Lis_Disk.sh</files>
        <files>remote-scripts/ica/check_traces.sh</files>
        <setupScript>SetupScripts\AddVhdxHardDisk.ps1</setupScript>
        <cleanupScript>SetupScripts\RemoveVhdxHardDisk.ps1</cleanupScript>
        <timeout>18000</timeout>
        <testparams>
           <param>SCSI=0,1,Fixed,4096</param>
            <param>SCSI=0,2,Fixed,4096</param>
            <param>SCSI=0,3,Fixed,4096</param>
            <param>TC_COVERED=STOR-51</param>
        </testparams>
        <onError>Continue</onError>
    </test>

    <test>
        <testName>VHDx_4k_HotADD_Multi_Dynamic_SCSI</testName>
        <testScript>STOR_Lis_Disk.sh</testScript>
        <files>remote-scripts/ica/STOR_Lis_Disk.sh</files>
        <files>remote-scripts/ica/check_traces.sh</files>
        <preTest>setupscripts\AddVhdxHardDisk.ps1</preTest>
        <cleanupScript>setupScripts\RemoveVhdxHardDisk.ps1</cleanupScript>
        <timeout>18000</timeout>
        <testparams>
            <param>SCSI=0,1,Dynamic,4096</param>
            <param>SCSI=0,2,Dynamic,4096</param>
            <param>TC_COVERED=STOR-55,STOR-57</param>
        </testparams>
        <onError>Continue</onError>
        <noReboot>False</noReboot>
    </test>

    <test>
        <testName>VHDx_4k_HotRemove_Multi_Dynamic_SCSI</testName>
        <testScript>STOR_hot_remove.sh</testScript>
        <files>remote-scripts/ica/STOR_hot_remove.sh</files>
            <files>remote-scripts/ica/check_traces.sh</files>
        <setupScript>setupScripts\AddVhdxHardDisk.ps1</setupScript>
        <preTest>setupScripts\RemoveVhdxHardDisk.ps1</preTest>
        <timeout>18000</timeout>
        <testparams>
            <param>SCSI=0,1,Dynamic,4096</param>
            <param>SCSI=0,2,Dynamic,4096</param>
            <param>TC_COVERED=STOR-56</param>
        </testparams>
        <onError>Continue</onError>
        <noReboot>False</noReboot>
    </test>

    <test>
        <testName>VHDx_SCSI_0_1_Dynamic_Large_3TB</testName>
        <setupScript>SetupScripts\Add-VHDXForResize.ps1</setupScript>
        <cleanupScript>SetupScripts\Remove-VHDXHardDisk.ps1</cleanupScript>
        <testParams>
            <param>Type=Dynamic</param>
            <param>SectorSize=512</param>
            <param>DefaultSize=3TB</param>
            <!-- <param>Path=G:\VHDs</param> -->
            <param>fileSystems=(ext4 xfs btrfs)</param>
            <param>SCSI=0,1,Fixed,512,3TB</param>
            <param>TC_COVERED=STOR-32-A</param>
        </testParams>
        <testScript>STOR_Large_Disk.sh</testScript>
        <files>remote-scripts/ica/STOR_Large_Disk.sh</files>
        <timeout>10800</timeout>
    </test>

    <test>
        <testName>VHDx_SCSI_0_1_Dynamic_Large_16TB</testName>
        <setupScript>SetupScripts\Add-VHDXForResize.ps1</setupScript>
        <cleanupScript>SetupScripts\Remove-VHDXHardDisk.ps1</cleanupScript>
        <testParams>
            <param>Type=Dynamic</param>
            <param>SectorSize=512</param>
            <param>DefaultSize=16TB</param>
            <!-- <param>Path=G:\VHDs</param> -->
            <param>fileSystems=(ext4 xfs btrfs)</param>
             <param>SCSI=0,1,Fixed,512,16TB</param>
            <param>TC_COVERED=STOR-32-B</param>
        </testParams>
        <testScript>STOR_Large_Disk.sh</testScript>
        <files>remote-scripts/ica/STOR_Large_Disk.sh</files>
        <timeout>10800</timeout>
    </test>

    <test>
        <testName>VHDx_SCSI_0_1_Dynamic_Large_64TB</testName>
        <setupScript>SetupScripts\Add-VHDXForResize.ps1</setupScript>
        <cleanupScript>SetupScripts\Remove-VHDXHardDisk.ps1</cleanupScript>
        <testParams>
            <param>Type=Dynamic</param>
            <param>SectorSize=4096</param>
            <param>DefaultSize=64TB</param>
            <!-- <param>Path=G:\VHDs</param> -->
            <param>fileSystems=(ext4 xfs btrfs)</param>
            <param>SCSI=0,1,Fixed,4096,64TB</param>
            <param>TC_COVERED=STOR-32-C</param>
        </testParams>
        <testScript>STOR_Large_Disk.sh</testScript>
        <files>remote-scripts/ica/STOR_Large_Disk.sh</files>
        <timeout>10800</timeout>
    </test>


    <!-- VMBus -->
    <test>
        <testName>VMBus_protocol_version</testName>
        <testScript>vmbus_protocol_version.sh</testScript>
        <files>remote-scripts/ica/vmbus_protocol_version.sh</files>
        <timeout>300</timeout>
        <onError>Continue</onError>
        <noReboot>False</noReboot>
        <testParams>
            <param>TC_COVERED=VMBus-01</param>
        </testParams>
    </test>

    <test>
        <testName>VMBus_verify_interrupts</testName>
        <testScript>vmbus_verify_interrupts.sh</testScript>
        <setupScript>setupScripts\ChangeCPU.ps1</setupScript>
        <files>remote-scripts/ica/vmbus_verify_interrupts.sh</files>
        <timeout>600</timeout>
        <onError>Continue</onError>
        <noReboot>False</noReboot>
        <testParams>
                <param>TC_COVERED=VMBus-02</param>
                <param>vCPU=4</param>
          </testParams>
    </test>

    <test>
        <testName>VMBus_PanicNotifier</testName>
        <testScript>SetupScripts\VMBus_PanicNotifier.ps1</testScript>
        <timeout>800</timeout>
        <onError>Continue</onError>
        <noReboot>False</noReboot>
        <testParams>
            <param>TC_COVERED=VMBus-03</param>
        </testParams>
    </test>

    <test>
        <testName>VMBus_PanicNotifier_onKdump</testName>
        <testScript>SetupScripts\VMBus_PanicNotifier_onKdump.ps1</testScript>
        <setupScript>setupScripts\SetVMMemory.ps1</setupScript>
        <timeout>800</timeout>
        <onError>Continue</onError>
        <noReboot>False</noReboot>
        <testParams>
            <param>TC_COVERED=VMBus-04</param>
            <param>VMMemory=2GB</param>
        </testParams>
        </test>

    <test>
        <testName>PreVSS_TakeSnapshot</testName>
        <testScript>setupscripts\PreVSS_TakeSnapshot.ps1</testScript>
        <timeout>600</timeout>
        <onError>Continue</onError>
        <noReboot>False</noReboot>
    </test>

    <test>
        <testName>STOR_VSS_BackupRestore</testName>
        <testScript>setupscripts\STOR_VSS_BackupRestore.ps1</testScript>
        <testParams>
            <param>TC_COVERED=VSS-17,VSS-06</param>
            <param>DriveLetter=V:</param>
            <param>snapshotName=ICABase</param>
        </testParams>
        <timeout>2400</timeout>
        <OnError>Continue</OnError>
        <cleanupScript>setupscripts\RevertSnapshot.ps1</cleanupScript>
    </test>

    <test>
        <testName>STOR_VSS_BackupRestore_ext3_vhdx</testName>
        <setupScript>setupscripts\AddVhdxHardDisk.ps1</setupScript>
        <testScript>setupscripts\STOR_VSS_BackupRestore_Partition.ps1</testScript>
         <testParams>
            <param>TC_COVERED=VSS-01</param>
            <param>DriveLetter=V:</param>
            <param>SCSI=0,1,Dynamic</param>
            <param>FILESYS=ext3</param>
            <param>snapshotName=ICABase</param>
        </testParams>
        <timeout>2400</timeout>
        <OnError>Continue</OnError>
        <cleanupScript>setupscripts\RevertSnapshot.ps1</cleanupScript>
    </test>

    <test>
        <testName>STOR_VSS_BackupRestore_reiserfs_vhdx</testName>
        <setupScript>setupscripts\AddVhdxHardDisk.ps1</setupScript>
        <testScript>setupscripts\STOR_VSS_BackupRestore_Partition.ps1</testScript>
        <testParams>
            <param>TC_COVERED=VSS-03</param>
            <param>DriveLetter=V:</param>
            <param>SCSI=0,1,Dynamic</param>
            <param>FILESYS=reiserfs</param>
            <param>snapshotName=ICABase</param>
        </testParams>
        <timeout>2400</timeout>
        <OnError>Continue</OnError>
        <cleanupScript>setupscripts\RevertSnapshot.ps1</cleanupScript>
    </test>

    <test>
        <testName>STOR_VSS_BackupRestore_ext4_vhdx</testName>
        <setupScript>setupscripts\AddVhdxHardDisk.ps1</setupScript>
        <testScript>setupscripts\STOR_VSS_BackupRestore_Partition.ps1</testScript>
        <testParams>
            <param>TC_COVERED=VSS-05</param>
            <param>DriveLetter=V:</param>
            <param>SCSI=0,1,Dynamic</param>
            <param>FILESYS=ext4</param>
            <param>snapshotName=ICABase</param>
        </testParams>
        <timeout>2400</timeout>
        <OnError>Continue</OnError>
        <cleanupScript>setupscripts\RevertSnapshot.ps1</cleanupScript>
    </test>

    <test>
        <testName>STOR_VSS_BackupRestore_ISO_NoNetwork</testName>
        <testScript>setupscripts\STOR_VSS_BackupRestore_ISO_NoNetwork.ps1</testScript>
        <testParams>
            <param>TC_COVERED=VSS-11</param>
            <param>DriveLetter=V:</param>
            <param>snapshotName=ICABase</param>
        </testParams>
        <timeout>2400</timeout>
        <OnError>Continue</OnError>
        <cleanupScript>setupscripts\RevertSnapshot.ps1</cleanupScript>
    </test>

    <test>
        <testName>STOR_VSS_BackupRestore_PassTru</testName>
        <setupScript>setupscripts\AddVhdxHardDisk.ps1</setupScript>
        <testScript>setupscripts\STOR_VSS_BackupRestore_Partition.ps1</testScript>
        <testParams>
            <param>TC_COVERED=VSS-16</param>
            <param>DriveLetter=V:</param>
            <param>SCSI=0,1,PassThrough</param>
            <param>FILESYS=ext3</param>
            <param>snapshotName=ICABase</param>
        </testParams>
        <timeout>2400</timeout>
        <OnError>Continue</OnError>
        <cleanupScript>setupscripts\RevertSnapshot.ps1</cleanupScript>
    </test>

    <test>
        <testName>STOR_VSS_BackupRestore_DiskStress</testName>
        <testScript>setupscripts\STOR_VSS_BackupRestore_DiskStress.ps1</testScript>
        <testParams>
            <param>TC_COVERED=VSS-14</param>
            <param>DriveLetter=V:</param>
            <param>iOzoneVers=3_424</param>
            <param>snapshotName=ICABase</param>
        </testParams>
        <timeout>2400</timeout>
        <OnError>Continue</OnError>
        <cleanupScript>setupscripts\RevertSnapshot.ps1</cleanupScript>
    </test>

    <test>
        <testName>STOR_VSS_BackupRestore_State_Off</testName>
        <testScript>setupscripts\STOR_VSS_BackupRestore_State.ps1</testScript>
        <testParams>
            <param>TC_COVERED=VSS-15</param>
            <param>DriveLetter=V:</param>
            <param>vmState=Off</param>
            <param>snapshotName=ICABase</param>
        </testParams>
        <timeout>2400</timeout>
        <OnError>Continue</OnError>
        <cleanupScript>setupscripts\RevertSnapshot.ps1</cleanupScript>
    </test>

    <test>
        <testName>STOR_VSS_BackupRestore_State_Paused</testName>
        <testScript>setupscripts\STOR_VSS_BackupRestore_State.ps1</testScript>
        <testParams>
            <param>TC_COVERED=VSS-15</param>
            <param>DriveLetter=V:</param>
            <param>vmState=Paused</param>
            <param>snapshotName=ICABase</param>
        </testParams>
        <timeout>2400</timeout>
        <OnError>Continue</OnError>
        <cleanupScript>setupscripts\RevertSnapshot.ps1</cleanupScript>
    </test>

   <test>
        <testName>STOR_VSS_BackupRestore_Fail</testName>
        <setupScript>
            <file>setupscripts\RevertSnapshot.ps1</file>
            <file>setupscripts\AddVhdxHardDisk.ps1</file>
        </setupScript>
        <testScript>setupscripts\STOR_VSS_BackupRestore_Fail.ps1</testScript>
        <testParams>
            <param>TC_COVERED=VSS-18</param>
            <param>DriveLetter=C:</param>
            <param>SCSI=0,1,Dynamic</param>
            <param>FILESYS=ext3</param>
            <param>snapshotName=ICABase</param>
        </testParams>
        <timeout>2400</timeout>
        <OnError>Continue</OnError>
    </test>
    <!-- SECURE BOOT -->
    <test>
        <testName>SecureBootBasic</testName>
        <setupScript>setupScripts\Set-SecureBoot.ps1</setupScript>
        <testScript>setupScripts\SecureBoot.ps1</testScript>
        <timeout>600</timeout>
        <onError>Continue</onError>
        <testparams>
           <param>TC_COVERED=SECBOOT-01</param>
        </testparams>
    </test>
    <test>
        <testName>SecureBootMigrateVM</testName>
        <setupScript>setupScripts\Set-SecureBoot.ps1</setupScript>
        <testScript>setupScripts\SecureBoot.ps1</testScript>
        <timeout>18000</timeout>
        <onError>Continue</onError>
        <testparams>
            <param>updateKernel=True</param>
            <param>TC_COVERED=SECBOOT-03</param>
        </testparams>
    </test>
    <test>
        <testName>SecureBootBasicVSSBackup</testName>
        <setupScript>setupScripts\Set-SecureBoot.ps1</setupScript>
        <testScript>setupScripts\SecureBootVSS.ps1</testScript>
        <timeout>18000</timeout>
        <onError>Continue</onError>
        <testparams>
            <param>driveletter=H:</param>
            <param>secureBootVM=True</param>
            <param>TC_COVERED=SECBOOT-04</param>
        </testparams>
    </test>
    <test>
        <testName>SecureBootUpdateKernel</testName>
        <setupScript>setupScripts\Set-SecureBoot.ps1</setupScript>
        <testScript>setupScripts\SecureBoot.ps1</testScript>
        <timeout>18000</timeout>
        <onError>Continue</onError>
        <testparams>
            <param>updateKernel=True</param>
            <param>TC_COVERED=SECBOOT-05</param>
        </testparams>
    </test>

    <!-- DM tests -->
    <test>
        <testName>DM_loaded</testName>
        <setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
        <testParams>
            <param>TC_COVERED=DM-01</param>
            <param>vmName=VMName</param>
            <param>enableDM=yes</param>
            <param>minMem=512MB</param>
            <param>maxMem=1GB</param>
            <param>startupMem=512MB</param>
            <param>memWeight=0</param>
            <param>staticMem=512MB</param>
        </testParams>
        <testScript>DM_VERIFY_LOADED.sh</testScript>
        <files>remote-scripts/ica/DM_VERIFY_LOADED.sh,remote-scripts/ica/utils.sh</files>
        <cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
        <timeout>800</timeout>
    </test>

    <test>
        <testName>HotAdd_Verify_udev</testName>
        <setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
        <testParams>
            <param>TC_COVERED=DM-02</param>
            <param>enableDM=yes</param>
            <param>minMem=512MB</param>
            <param>maxMem=2GB</param>
            <param>startupMem=1024MB</param>
            <param>memWeight=20</param>
            <param>staticMem=512MB</param>
        </testParams>
        <testScript>DM_HotAdd_Verify_udev.sh</testScript>
        <files>remote-scripts/ica/DM_HotAdd_Verify_udev.sh</files>
        <cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
        <timeout>3000</timeout>
    </test>

    <test>
        <testName>HotAdd</testName>
        <setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
        <testParams>
            <param>TC_COVERED=DM-03</param>
            <param>vmName=VMName</param>
            <param>enableDM=yes</param>
            <param>minMem=1024MB</param>
            <param>maxMem=4GB</param>
            <param>startupMem=1024MB</param>
            <param>memWeight=100</param>
            <param>staticMem=512MB</param>
        </testParams>
        <testScript>setupScripts\DM_HotAdd.ps1</testScript>
        <cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
        <timeout>3000</timeout>
    </test>

    <test>
        <testName>HotRemove</testName>
        <setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
        <testParams>
            <param>TC_COVERED=DM-04</param>
            <param>vmName=VMName</param>
            <param>enableDM=yes</param>
            <param>minMem=1024MB</param>
            <param>maxMem=6GB</param>
            <param>startupMem=1024MB</param>
            <param>memWeight=100</param>
            <param>staticMem=1024MB</param>
            <param>vmName=VM2Name</param>
            <param>enableDM=yes</param>
            <param>minMem=512MB</param>
            <param>maxMem=70%</param>
            <param>startupMem=70%</param>
            <param>memWeight=0</param>
            <param>staticMem=1024MB</param>
        </testParams>
        <testScript>setupScripts\DM_HotAddRemove.ps1</testScript>
        <cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
        <timeout>3000</timeout>
    </test>

    <test>
        <testName>StartupLowCompete</testName>
        <setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
        <testParams>
            <param>TC_COVERED=DM-05</param>
            <param>vmName=VMName</param>
            <param>enableDM=yes</param>
            <param>minMem=512MB</param>
            <param>maxMem=80%</param>
            <param>startupMem=79%</param>
            <param>memWeight=0</param>
            <param>staticMem=512MB</param>
            <param>vmName=VM2Name</param>
            <param>enableDM=yes</param>
            <param>minMem=512MB</param>
            <param>maxMem=20%</param>
            <param>startupMem=19%</param>
            <param>memWeight=0</param>
            <param>staticMem=512MB</param>
    </testParams>
    <testScript>setupScripts\DM_StartupLowCompete.ps1</testScript>
    <cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
    <timeout>8000</timeout>
    </test>

    <test>
        <testName>StartupHighCompete</testName>
        <setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
        <testParams>
            <param>TC_COVERED=DM-06</param>
            <param>vmName=VMName</param>
            <param>enableDM=yes</param>
            <param>minMem=512MB</param>
            <param>maxMem=60%</param>
            <param>startupMem=60%</param>
            <param>memWeight=0</param>
            <param>staticMem=1024MB</param>
            <param>vmName=VM2Name</param>
            <param>enableDM=yes</param>
            <param>minMem=512MB</param>
            <param>maxMem=40%</param>
            <param>startupMem=40%</param>
            <param>memWeight=0</param>
            <param>staticMem=512MB</param>
            <param>vmName=VM3Name</param>
            <param>enableDM=yes</param>
            <param>minMem=512MB</param>
            <param>maxMem=25%</param>
            <param>startupMem=25%</param>
            <param>memWeight=100</param>
            <param>staticMem=512MB</param>
        </testParams>
        <testScript>setupScripts\DM_RemoveUnderPressure.ps1</testScript>
        <cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
        <timeout>1800</timeout>
    </test>

    <test>
        <testName>DemandPressure</testName>
        <setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
        <testParams>
            <param>TC_COVERED=DM-07</param>
            <param>vmName=VMName</param>
            <param>enableDM=yes</param>
            <param>minMem=512MB</param>
            <param>maxMem=20%</param>
            <param>startupMem=20%</param>
            <param>memWeight=0</param>
            <param>staticMem=512MB</param>
        </testParams>
        <testScript>setupScripts\DM_PressureChangesDemand.ps1</testScript>
        <cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
        <timeout>1800</timeout>
    </test>

    <test>
        <testName>HighPriority</testName>
        <setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
        <testParams>
            <param>TC_COVERED=DM-08</param>
            <param>vmName=VMName</param>
            <param>enableDM=yes</param>
            <param>minMem=512MB</param>
            <param>maxMem=50%</param>
            <param>startupMem=50%</param>
            <param>memWeight=100</param>
            <param>staticMem=1024MB</param>
            <param>vmName=VM2Name</param>
            <param>enableDM=yes</param>
            <param>minMem=512MB</param>
            <param>maxMem=50%</param>
            <param>startupMem=50%</param>
            <param>memWeight=0</param>
            <param>staticMem=1024MB</param>
        </testParams>
        <testScript>setupScripts\DM_HighPriority.ps1</testScript>
        <cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
        <timeout>3000</timeout>
    </test>

    <test>
        <testName>MinMemHonored</testName>
        <setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
        <testParams>
            <param>TC_COVERED=DM-09</param>
            <param>vmName=VMName</param>
            <param>enableDM=yes</param>
            <param>minMem=50%</param>
            <param>maxMem=80%</param>
            <param>startupMem=80%</param>
            <param>memWeight=0</param>
            <param>staticMem=1024MB</param>
            <param>vmName=VM2Name</param>
            <param>enableDM=yes</param>
            <param>minMem=512MB</param>
            <param>maxMem=50%</param>
            <param>startupMem=50%</param>
            <param>memWeight=0</param>
            <param>staticMem=1024MB</param>
        </testParams>
        <testScript>setupScripts\DM_MinMemHonor.ps1</testScript>
        <cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
        <timeout>3000</timeout>
    </test>

    <test>
        <testName>MaxMemHonored</testName>
        <setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
        <testParams>
            <param>TC_COVERED=DM-10</param>
            <param>vmName=VMName</param>
            <param>enableDM=yes</param>
            <param>minMem=512MB</param>
            <param>maxMem=80%</param>
            <param>startupMem=80%</param>
            <param>memWeight=0</param>
            <param>staticMem=1024MB</param>
            <param>vmName=VM2Name</param>
            <param>enableDM=yes</param>
            <param>minMem=512MB</param>
            <param>maxMem=40%</param>
            <param>startupMem=40%</param>
            <param>memWeight=100</param>
            <param>staticMem=1024MB</param>
        </testParams>
        <testScript>setupScripts\DM_MaxMemHonor.ps1</testScript>
        <cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
        <timeout>3000</timeout>
    </test>

    <test>
        <testName>SaveRestore</testName>
        <setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
        <testParams>
            <param>TC_COVERED=DM-11</param>
            <param>vmName=VMName</param>
            <param>enableDM=yes</param>
            <param>minMem=512MB</param>
            <param>maxMem=80%</param>
            <param>startupMem=80%</param>
            <param>memWeight=0</param>
            <param>staticMem=512MB</param>
            <param>vmName=VM2Name</param>
            <param>enableDM=yes</param>
            <param>minMem=512MB</param>
            <param>maxMem=20%</param>
            <param>startupMem=20%</param>
            <param>memWeight=0</param>
            <param>staticMem=512MB</param>
        </testParams>
        <testScript>setupScripts\DM_SaveRestore.ps1</testScript>
        <cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
        <timeout>800</timeout>
    </test>

    <test>
        <testName>CleanShutdown</testName>
        <setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
        <testParams>
            <param>TC_COVERED=DM-12</param>
            <param>vmName=VMName</param>
            <param>enableDM=yes</param>
            <param>minMem=512MB</param>
            <param>maxMem=20%</param>
            <param>startupMem=20%</param>
            <param>memWeight=0</param>
            <param>staticMem=512MB</param>
            <param>vmName=VM2Name</param>
            <param>enableDM=yes</param>
            <param>minMem=512MB</param>
            <param>maxMem=75%</param>
            <param>startupMem=75%</param>
            <param>memWeight=100</param>
            <param>staticMem=512MB</param>
        </testParams>
        <testScript>setupScripts\DM_CleanShutdown.ps1</testScript>
        <cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
        <timeout>1800</timeout>
    </test>
    <!-- Fcopy Testing -->
    <test>
        <testName>FCOPY_basic</testName>
        <testScript>setupscripts\FCOPY_basic.ps1</testScript>
        <timeout>900</timeout>
        <testParams>
            <param>TC_COVERED=FCopy-01</param>
        </testParams>
        <noReboot>True</noReboot>
    </test>

    <test>
        <testName>FCOPY_file_exists</testName>
        <testScript>setupscripts\FCOPY_file_exists.ps1</testScript>
        <timeout>900</timeout>
        <testParams>
            <param>TC_COVERED=FCopy-02</param>
        </testParams>
        <noReboot>True</noReboot>
    </test>

    <test>
        <testName>FCOPY_overwrite</testName>
        <testScript>setupscripts\FCOPY_overwrite.ps1</testScript>
        <timeout>900</timeout>
        <testParams>
            <param>TC_COVERED=FCopy-03</param>
        </testParams>
        <noReboot>False</noReboot>
    </test>

    <test>
        <testName>FCOPY_large_file</testName>
        <setupScript>setupScripts\Add-VHDXForResize.ps1</setupScript>
        <testScript>setupscripts\FCOPY_large_file.ps1</testScript>
        <cleanupScript>SetupScripts\Remove-VHDXHardDisk.ps1</cleanupScript>
        <timeout>900</timeout>
         <testParams>
            <param>TC_COVERED=FCopy-04</param>
            <param>Type=Fixed</param>
            <param>SectorSize=512</param>
            <param>DefaultSize=15GB</param>
            <param>SCSI=1,0,Dynamic,512,15GB</param>
        </testParams>
        <noReboot>False</noReboot>
    </test>

    <test>
        <testName>FCOPY_non_ascii</testName>
        <testScript>setupscripts\FCOPY_non_ascii.ps1</testScript>
        <timeout>2000</timeout>
        <testParams>
            <param>TC_COVERED=FCopy-05</param>
        </testParams>
        <noReboot>True</noReboot>
    </test>

	<test>
		<testName>FCOPY_repeat</testName>
		<setupScript>setupScripts\Add-VHDXForResize.ps1</setupScript>
		<testScript>setupscripts\FCOPY_repeated_delete.ps1</testScript>
		<cleanupScript>SetupScripts\Remove-VHDXHardDisk.ps1</cleanupScript>
		<timeout>1200</timeout>
		<testParams>
			<param>TC_COVERED=FCopy-06</param>
            <param>Type=Fixed</param>
            <param>SectorSize=512</param>
            <param>DefaultSize=3GB</param>
            <!--Make sure DefaultSize is equal or bigger than FileSize-->
			<param>FileSize=2GB</param>
		</testParams>
		<noReboot>False</noReboot>
	</test>

<!-- FC Testing -->

    <test>
        <testName>FC_disks_detection</testName>
        <testScript>FC_disks.sh</testScript>
        <files>remote-scripts\ica\FC_disks.sh</files>
        <setupScript>setupscripts\FC_AddFibreChannelHba.ps1</setupScript>
        <cleanupScript>setupScripts\FC_RemoveFibreChannelHba.ps1</cleanupScript>
        <timeout>3600</timeout>
        <testParams>
            <param>TC_COVERED=FC-01,FC-02</param>
            <param>vSANName=vFC</param>
        </testParams>
    </test>

    <test>
        <testName>FC_stressTest</testName>
        <testScript>FC_stressTest.sh</testScript>
        <files>remote-scripts\ica\FC_stressTest.sh</files>
        <files>Tools/iozone3_420.tar</files>
        <setupScript>setupscripts\FC_AddFibreChannelHba.ps1</setupScript>
        <cleanupScript>setupScripts\FC_RemoveFibreChannelHba.ps1</cleanupScript>
        <timeout>7200</timeout>
        <testParams>
            <param>TC_COVERED=FC-04</param>
            <param>vSANName=vFC</param>
            <param>FILE_NAME=iozone3_420.tar</param>
        </testParams>
    </test>

    <test>
        <testName>FC_SaveRestore_VM</testName>
        <testScript>FC_disks.sh</testScript>
        <files>remote-scripts\ica\FC_disks.sh</files>
        <setupScript>setupscripts\FC_AddFibreChannelHba.ps1</setupScript>
        <posttest>setupScripts\FC_SaveRestoreVM.ps1</posttest>
        <cleanupScript>setupScripts\FC_RemoveFibreChannelHba.ps1</cleanupScript>
        <timeout>7200</timeout>
        <testParams>
            <param>TC_COVERED=FC-07</param>
            <param>vSANName=vFC</param>
        </testParams>
    </test>

    <test>
        <testName>FC_disks_multipath_detection</testName>
        <testScript>setupscripts\FC_MultipathDetection.ps1</testScript>
        <setupScript>setupscripts\FC_AddFibreChannelHba.ps1</setupScript>
        <files>remote-scripts\ica\utils.sh</files>
        <timeout>3600</timeout>
        <testParams>
            <param>TC_COVERED=FC-08</param>
            <param>vSANName=vFC</param>
        </testParams>
    </test>

    <test>
        <testName>FC_WWN_basic</testName>
        <testScript>setupScripts\FC_WWN.ps1</testScript>
        <files>remote-scripts\ica\FC_WWN.sh,remote-scripts/ica/utils.sh</files>
        <setupScript>setupscripts\FC_AddFibreChannelHba.ps1</setupScript>
        <cleanupScript>setupScripts\FC_RemoveFibreChannelHba.ps1</cleanupScript>
        <timeout>800</timeout>
        <testParams>
            <param>TC_COVERED=FC-09</param>
            <param>vSANName=FC_NAME</param>
        </testParams>
    </test>
</testCases>


    <VMs>
        <vm>
            <hvServer>localhost</hvServer>
            <vmName>LinuxVm</vmName>
            <os>Linux</os>
            <ipv4></ipv4>
            <sshKey>linux_id_rsa.ppk</sshKey>
            <testParams>
                <param>VM2NAME=vmName</param>
                <param>SSH_PRIVATE_KEY=linux_id_rsa</param>
                <param>SnapshotName=ICABase</param>
            </testParams>
            <suite>Tests</suite>
        </vm>
    </VMs>
</config>
